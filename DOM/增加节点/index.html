<!--
 * @Author: 123 dian.peng.zhao@gds.ey.com
 * @Date: 2023-06-17 12:18:38
 * @LastEditors: 123 dian.peng.zhao@gds.ey.com
 * @LastEditTime: 2023-06-17 20:33:20
 * @FilePath: \前端文档\DOM\增加节点\index.html
 * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <!-- <div class="box"></div> -->

    <script>
      var element = document.createElement("div");
      element.className = "box";
      document.body.appendChild(element);

      // 动态加载link标签
      var link = document.createElement("link");
      link.rel = "stylesheet";
      link.href = "index.css";
      document.head.appendChild(link);

      // 动态加载script标签
      var script = document.createElement("script");
      script.src = "index.js";

      /*
       * 因为JavaScript是单线程执行的，当执行到document.head.appendChild(script)时，
       * 浏览器会异步加载script标签中的脚本，而不会等待脚本加载完成后再执行handleTest()函数。因此会报错
       */
      //   document.head.appendChild(script)
      //    handleTest();

      // onload事件绑定到script标签的加载事件上，可以确保脚本加载完成后再执行handleTest()函数，避免了出错的可能性。
      document.body.appendChild(script).onload = function () {
        console.log("script loaded");
        handleTest();
      };

      var div = document.createElement("div");
      div.textContent = 'Hello World!';
      // var textNode = document.createTextNode("Hello World!");
      // div.appendChild(textNode);
      document.body.appendChild(div);
    </script>
  </body>
</html>
